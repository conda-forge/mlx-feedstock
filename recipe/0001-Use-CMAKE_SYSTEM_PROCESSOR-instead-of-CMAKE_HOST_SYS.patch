From 29436b7c4c1c20d682385c0a4c1bd72fe2998c9e Mon Sep 17 00:00:00 2001
From: "Uwe L. Korn" <uwe.korn@quantco.com>
Date: Tue, 19 Dec 2023 14:44:19 +0100
Subject: [PATCH] Use CMAKE_SYSTEM_PROCESSOR instead of
 CMAKE_HOST_SYSTEM_PROCESSOR

---
 CMakeLists.txt | 4 ++--
 1 file changed, 2 insertions(+), 2 deletions(-)

diff --git a/CMakeLists.txt b/CMakeLists.txt
index 712b03a..e6cff26 100644
--- a/CMakeLists.txt
+++ b/CMakeLists.txt
@@ -29,12 +29,12 @@ set(MLX_BUILD_ARM OFF)
 
 if (${CMAKE_SYSTEM_NAME} MATCHES "Darwin")
 
-  if (${CMAKE_HOST_SYSTEM_PROCESSOR} MATCHES "x86_64")
+  if (${CMAKE_SYSTEM_PROCESSOR} MATCHES "x86_64")
     message(WARNING 
       "Building for x86_64 on MacOS is not supported." 
       " If you are on an Apple silicon system, "
       " make sure you are building for arm64.")
-  elseif(${CMAKE_HOST_SYSTEM_PROCESSOR} MATCHES "arm64")
+  elseif(${CMAKE_SYSTEM_PROCESSOR} MATCHES "arm64")
     set(MLX_BUILD_ARM ON)
   endif()
 
-- 
2.39.3 (Apple Git-145)

